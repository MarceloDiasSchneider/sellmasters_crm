use sellmaster;




CREATE TABLE `utenti`(
	`id_utente` INT AUTO_INCREMENT,
    `nome` VARCHAR(30) NOT NULL,
	`cognome` VARCHAR(30),
    `email` VARCHAR(50) UNIQUE NOT NULL,
	`codice_fiscale` VARCHAR(16),
	`telefono` VARCHAR(16),
	`data_nascita` DATE,
    `password` VARCHAR(255) NOT NULL,
    `id_livello` INT NOT NULL,
    `attivo` INT NOT NULL,
	PRIMARY KEY (`id_utente`)   )
 DEFAULT CHARSET = utf8;

CREATE TABLE `livelli`(
	`id_livello` INT AUTO_INCREMENT,
    `descrizione` VARCHAR(20) NOT NULL,
    `permissione` ENUM('W', 'R') NOT NULL,
	PRIMARY KEY (`id_livello`),
	UNIQUE (`descrizione`)
) DEFAULT CHARSET = utf8;

CREATE TABLE `accede_logs`(
	`id_log` INT AUTO_INCREMENT,
    `id_utente` INT NOT NULL,
	`datatime` TIMESTAMP NOT NULL,
    `ip_server` VARCHAR(255) NOT NULL,
	`remote_port` INT,
    `user_agent` VARCHAR(255),
	PRIMARY KEY (`id_log`),
	FOREIGN KEY (`id_utente`) REFERENCES utenti(`id_utente`)
) DEFAULT CHARSET = utf8;
